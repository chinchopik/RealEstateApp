@using RealEstateApp.Models.RealEstateList;
@model CatalogViewModel
@{

}


<div class="singlePage d-flex">
    <div class="col">
        <div>      
            <div class="d-flex">   
                <div>
                    <form asp-controller="Home" asp-action="CreateRequest">
                        @Html.HiddenFor(_ => _.RealEstate.Address)
                        <div class="aboba">
                            <p>@Model.RealEstate.Address</p>
                        </div>
                        <div class="d-flex flex-row">
                            <div class="col">
                                <p></p>
                                <div class="crop">
                                    <img src="@Model.RealEstate.Photo" />
                                </div>
                            </div>
                            <div class="col-1"></div>
                            <div class="d-flex col-3 align-items-start p-3 mt-3 rounded justify-content-start border border-success">
                                    @Html.HiddenFor(_ => _.RealEstate.Id)
                                    <div>
                                        <div class="mb-3 d-flex input-group-text">
                                            <div action="form-floating">
                                                <label class="form-label d-flex">Имя</label>
                                                <input type="text" asp-for="@Model.Request.Name" class="form-control" placeholder="Введите логин" />
                                                <span asp-validation-for="Request.Name" class="text-danger"></span>
                                                <div class="text-danger">@ViewBag.Error</div>
                                            </div>
                                        </div>

                                        <div class="mb-3 d-flex input-group-text">
                                            <div action="form-floating">
                                                <label asp-for="Request.Phone" class="form-label d-flex">Телефон</label>
                                                <input id="inputTelephone" type="text" asp-for="@Model.Request.Phone" class="form-control shadow-sm rounded" placeholder="Номер телефона"/>
                                            </div>
                                            <span asp-validation-for="Request.Phone" class="text-danger"></span>
                                            <div class="text-danger">@ViewBag.Error</div>
                                        </div>
                                       

                                        <div class="mb-3 d-flex input-group-text">
                                            <div action="form-floating">
                                                <label class="form-label d-flex">Электронная почта</label>
                                                <input type="text" class="form-control" asp-for="@Model.Request.Email" placeholder="Введите логин" />
                                                <span asp-validation-for="Request.Email" class="text-danger"></span>
                                                <div class="text-danger">@ViewBag.Error</div>
                                            </div>
                                        </div>
                                        <button class="btn btn-success" type="sumbit">
                                            Отправить заявку
                                        </button>
                                    </div>                          
                            </div>
                        </div>
                        <p></p>
                        <h3>Описание</h3>
                        <div>
                            <div class="d-flex col">
                                <span>Адрес: @Model.RealEstate.Address</span>
                            </div>
                            <div class="d-flex col">
                                <span>Цена: @Model.RealEstate.Price рублей</span>
                            </div>
                            <div class="d-flex col">
                                <span>Площадь: @Model.RealEstate.TotalArea кв. м2</span>
                            </div>
                            <div class="d-flex col">
                                <span>Количество комнат: @Model.RealEstate.NumberOfRooms</span>
                            </div>
                            <div class="d-flex col">
                                <span>Этаж: @Model.RealEstate.TotalFloors</span>
                            </div>
                        </div>
                        <p></p>
                        <h3>Расположение на карте</h3>
                        <p></p>
                        <div>
                            <div id="mapDiv" style="width: 800px; height: 500px"></div>
                            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
                            <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
                            <script>
                                // position we will use later
                                var lat = parseFloat(@Model.RealEstate.Latitude).toFixed(6);
                                var lon = parseFloat(@Model.RealEstate.Longitude).toFixed(6);
                                // initialize map
                                map = L.map('mapDiv').setView([lat, lon], 20);
                                // set map tiles source
                                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
                                    maxZoom: 18,
                                }).addTo(map);
                                // add marker to the map
                                marker = L.marker([lat, lon]).addTo(map);
                                // add popup to the marker
                                marker.bindPopup("Ваш объект").openPopup();
                            </script>
                        </div>
                        <div style="height:50px"> </div>
                    </form>
                </div>                
            </div>
        </div>
    </div>
    
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
}

<style>
    .fillDiv {
        display: block;
        height: 100%;
        width: 100%;
        text-decoration: none;
    }

    .aboba {
        word-wrap: break-word;
    }

    div.aboba{
        word-wrap: break-word;
        font-size: 24px;
        width: 1140px;
        max-height: 500px;
        overflow: hidden;
    }

    .aboba p {
        word-wrap:break-word;
    }

    .singlePage {
        justify-content:end;
        max-width: 80%;
        margin: 0 auto;
        padding: 0 20px;
        max-height: 300px;
    }

    .slick {
        display: flex;
        justify-content: end;
    }

    .flex {
        display: flex;
        justify-content: space-between;
    }

    .crop {
        width: 1140px;
        max-height: 500px;
        overflow: hidden;
    }

        .crop img {
            max-width: 100%;
            height: 100%;
        }

    #properties-details {
        word-wrap: normal;
    }

    #properties .container {
        position: relative;
    }

    .properties-slider img {
        width: auto;
        height: auto;
        display: block;
        text-decoration: none;
    }
</style>